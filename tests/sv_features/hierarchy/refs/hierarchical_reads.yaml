feature: hierarchical_reads
description: Test reading signals through hierarchical paths (e.g., child.signal)

cases:
  - name: simple_hierarchical_read
    description: Basic read of child module signal via hierarchical path
    sv: |
      module Child;
        logic [7:0] value;
      endmodule

      module Top;
        Child u_child();
        logic [7:0] x;

        initial begin
          u_child.value = 42;
          x = u_child.value;
        end
      endmodule
    expect:
      variables:
        x: 42

  - name: read_in_expression
    description: Hierarchical read used in an expression
    sv: |
      module Child;
        int value;
      endmodule

      module Top;
        Child u_child();
        int result;

        initial begin
          u_child.value = 10;
          result = u_child.value + 5;
        end
      endmodule
    expect:
      variables:
        result: 15

  - name: read_in_display
    description: Hierarchical read in $display system call
    sv: |
      module Child;
        int value;
      endmodule

      module Top;
        Child u_child();

        initial begin
          u_child.value = 99;
          $display("value = %d", u_child.value);
        end
      endmodule
    expect:
      stdout:
        contains: ["value = 99"]

  - name: multi_level_read
    description: Read through multiple levels of hierarchy
    sv: |
      module Inner;
        int data;
      endmodule

      module Middle;
        Inner u_inner();
      endmodule

      module Top;
        Middle u_mid();
        int x;

        initial begin
          u_mid.u_inner.data = 123;
          x = u_mid.u_inner.data;
        end
      endmodule
    expect:
      variables:
        x: 123

  - name: multiple_reads
    description: Multiple hierarchical reads in one expression
    sv: |
      module Child;
        int a, b;
      endmodule

      module Top;
        Child u_child();
        int sum;

        initial begin
          u_child.a = 3;
          u_child.b = 7;
          sum = u_child.a + u_child.b;
        end
      endmodule
    expect:
      variables:
        sum: 10
