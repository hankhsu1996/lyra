feature: binary_four_state
description: 4-state (X/Z) semantics for binary operators

cases:
  - name: and_with_zero_dominates
    description: AND with 0 produces 0 regardless of X/Z
    sv: |
      module Test;
        logic [3:0] a = 4'bx01z;
        logic [3:0] b = 4'b0000;
        logic [3:0] result;
        initial result = a & b;
      endmodule
    expect:
      variables:
        result: "4'b0000"

  - name: and_with_one_propagates
    description: AND with 1 preserves X/Z (X&1=X, Z&1=X per truth table)
    sv: |
      module Test;
        logic [3:0] a = 4'bx01z;
        logic [3:0] b = 4'b1111;
        logic [3:0] result;
        initial result = a & b;
      endmodule
    expect:
      variables:
        result: "4'bx01x"

  - name: or_with_one_dominates
    description: OR with 1 produces 1 regardless of X/Z
    sv: |
      module Test;
        logic [3:0] a = 4'bx01z;
        logic [3:0] b = 4'b1111;
        logic [3:0] result;
        initial result = a | b;
      endmodule
    expect:
      variables:
        result: "4'b1111"

  - name: or_with_zero_propagates
    description: OR with 0 preserves X, Z becomes X (unknown value | 0 = unknown)
    sv: |
      module Test;
        logic [3:0] a = 4'bx01z;
        logic [3:0] b = 4'b0000;
        logic [3:0] result;
        initial result = a | b;
      endmodule
    expect:
      variables:
        result: "4'bx01x"

  - name: xor_propagates_unknown
    description: XOR with X or Z produces X (bit 3 is x^1=x, bit 2 is 0^0=0, bit 1 is 1^1=0, bit 0 is z^0=x)
    sv: |
      module Test;
        logic [3:0] a = 4'bx01z;
        logic [3:0] b = 4'b1010;
        logic [3:0] result;
        initial result = a ^ b;
      endmodule
    expect:
      variables:
        result: "4'bx00x"

  - name: comparison_with_x_yields_x
    description: Equality comparison with X operand yields 1-bit X
    sv: |
      module Test;
        logic [3:0] a = 4'bx01z;
        logic [3:0] b = 4'b0010;
        logic cmp;
        initial cmp = (a == b);
      endmodule
    expect:
      variables:
        cmp: "1'bx"

  - name: comparison_with_x_not_equal
    description: Inequality comparison with X operand yields 1-bit X
    sv: |
      module Test;
        logic [3:0] a = 4'bx01z;
        logic [3:0] b = 4'b0010;
        logic cmp;
        initial cmp = (a != b);
      endmodule
    expect:
      variables:
        cmp: "1'bx"
