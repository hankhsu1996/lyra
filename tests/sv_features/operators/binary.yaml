feature: binary_operators
description: Tests for binary arithmetic, comparison, and logical operators

cases:
  - name: addition_basic
    sv: |
      module Test;
        int a, b, c;
        initial begin
          a = 10;
          b = 20;
          c = a + b;
        end
      endmodule
    expect:
      variables:
        c: 30

  - name: subtraction_basic
    sv: |
      module Test;
        int a, b, c;
        initial begin
          a = 30;
          b = 12;
          c = a - b;
        end
      endmodule
    expect:
      variables:
        c: 18

  - name: multiplication_basic
    sv: |
      module Test;
        int a, b, c;
        initial begin
          a = 5;
          b = 7;
          c = a * b;
        end
      endmodule
    expect:
      variables:
        c: 35

  - name: complex_expression
    sv: |
      module Test;
        int a, b, c, d;
        initial begin
          a = 5;
          b = 10;
          c = 3;
          d = a + b * c;
        end
      endmodule
    expect:
      variables:
        d: 35

  - name: comparison_equal
    sv: |
      module Test;
        int a, b;
        bit c, d;
        initial begin
          a = 10;
          b = 10;
          c = (a == b);
          d = (a == 11);
        end
      endmodule
    expect:
      variables:
        c: 1
        d: 0

  - name: comparison_not_equal
    sv: |
      module Test;
        int a, b;
        bit c, d;
        initial begin
          a = 10;
          b = 11;
          c = (a != b);
          d = (a != 10);
        end
      endmodule
    expect:
      variables:
        c: 1
        d: 0

  - name: comparison_less_than
    sv: |
      module Test;
        int a, b;
        bit c, d;
        initial begin
          a = 5;
          b = 10;
          c = (a < b);
          d = (b < a);
        end
      endmodule
    expect:
      variables:
        c: 1
        d: 0

  - name: comparison_less_than_equal
    sv: |
      module Test;
        int a, b, c;
        bit d, e, f;
        initial begin
          a = 5;
          b = 10;
          c = 5;
          d = (a <= b);
          e = (a <= c);
          f = (b <= a);
        end
      endmodule
    expect:
      variables:
        d: 1
        e: 1
        f: 0

  - name: comparison_greater_than
    sv: |
      module Test;
        int a, b;
        bit c, d;
        initial begin
          a = 15;
          b = 10;
          c = (a > b);
          d = (b > a);
        end
      endmodule
    expect:
      variables:
        c: 1
        d: 0

  - name: comparison_greater_than_equal
    sv: |
      module Test;
        int a, b, c;
        bit d, e, f;
        initial begin
          a = 15;
          b = 10;
          c = 15;
          d = (a >= b);
          e = (a >= c);
          f = (b >= a);
        end
      endmodule
    expect:
      variables:
        d: 1
        e: 1
        f: 0

  - name: bitwise_and
    sv: |
      module Test;
        int a, b, c;
        initial begin
          a = 5;
          b = 3;
          c = a & b;
        end
      endmodule
    expect:
      variables:
        c: 1

  - name: bitwise_or
    sv: |
      module Test;
        int a, b, c;
        initial begin
          a = 5;
          b = 3;
          c = a | b;
        end
      endmodule
    expect:
      variables:
        c: 7

  - name: bitwise_xor
    sv: |
      module Test;
        int a, b, c;
        initial begin
          a = 5;
          b = 3;
          c = a ^ b;
        end
      endmodule
    expect:
      variables:
        c: 6

  - name: bitwise_xnor
    sv: |
      module Test;
        int a, b, c;
        initial begin
          a = 5;
          b = 3;
          c = a ~^ b;
        end
      endmodule
    expect:
      variables:
        c: -7

  - name: bitwise_xnor_alt
    sv: |
      module Test;
        int a, b, c;
        initial begin
          a = 5;
          b = 3;
          c = a ^~ b;
        end
      endmodule
    expect:
      variables:
        c: -7

  - name: logical_and
    sv: |
      module Test;
        int a, b;
        bit r1, r2, r3;
        initial begin
          a = 5;
          b = 0;
          r1 = a && b;
          r2 = a && 1;
          r3 = b && b;
        end
      endmodule
    expect:
      variables:
        r1: 0
        r2: 1
        r3: 0

  - name: logical_or
    sv: |
      module Test;
        int a, b;
        bit r1, r2, r3;
        initial begin
          a = 5;
          b = 0;
          r1 = a || b;
          r2 = b || b;
          r3 = a || a;
        end
      endmodule
    expect:
      variables:
        r1: 1
        r2: 0
        r3: 1

  - name: shift_left
    sv: |
      module Test;
        int a, b;
        initial begin
          a = 8;
          b = a << 2;
        end
      endmodule
    expect:
      variables:
        b: 32

  - name: shift_right
    sv: |
      module Test;
        int a, b;
        initial begin
          a = 32;
          b = a >> 2;
        end
      endmodule
    expect:
      variables:
        b: 8

  - name: shift_arith_right_signed
    sv: |
      module Test;
        int a, b, c;
        initial begin
          a = -8;
          b = 2;
          c = a >>> b;
        end
      endmodule
    expect:
      variables:
        c: -2

  - name: shift_logic_right_signed
    sv: |
      module Test;
        int a, b, c;
        initial begin
          a = -8;
          b = 2;
          c = a >> b;
        end
      endmodule
    expect:
      variables:
        c: 1073741822

  - name: shift_arith_left_signed
    sv: |
      module Test;
        int a, b, c;
        initial begin
          a = -8;
          b = 2;
          c = a <<< b;
        end
      endmodule
    expect:
      variables:
        c: -32

  - name: shift_logic_left_signed
    sv: |
      module Test;
        int a, b, c;
        initial begin
          a = -8;
          b = 2;
          c = a << b;
        end
      endmodule
    expect:
      variables:
        c: -32

  - name: addition_bit_and_int
    sv: |
      module Test;
        bit a;
        int b, c;
        initial begin
          a = 1;
          b = 10;
          c = a + b;
        end
      endmodule
    expect:
      variables:
        c: 11

  - name: addition_int_and_longint
    sv: |
      module Test;
        int a;
        longint b, c;
        initial begin
          a = 100;
          b = 1000;
          c = a + b;
        end
      endmodule
    expect:
      variables:
        c: 1100

  - name: addition_bit_and_longint
    sv: |
      module Test;
        bit a;
        longint b, c;
        initial begin
          a = 1;
          b = 1000;
          c = a + b;
        end
      endmodule
    expect:
      variables:
        c: 1001

  - name: string_equal
    sv: |
      module Test;
        string a, b, c;
        bit r1, r2;
        initial begin
          a = "hello";
          b = "hello";
          c = "world";
          r1 = (a == b);
          r2 = (a == c);
        end
      endmodule
    expect:
      variables:
        r1: 1
        r2: 0

  - name: string_not_equal
    sv: |
      module Test;
        string a, b, c;
        bit r1, r2;
        initial begin
          a = "hello";
          b = "hello";
          c = "world";
          r1 = (a != c);
          r2 = (a != b);
        end
      endmodule
    expect:
      variables:
        r1: 1
        r2: 0
