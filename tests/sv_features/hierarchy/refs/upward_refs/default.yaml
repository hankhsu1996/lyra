feature: upward_hierarchical_refs
description: Tests for upward hierarchical references

cases:
  - name: child_reads_parent_var
    description: Child module reads parent variable via hierarchical path
    sv: |
      module Child;
        int result;
        initial begin
          result = Test.parent_val;
          $display("result=%0d", result);
        end
      endmodule

      module Test;
        int parent_val = 42;
        Child c();
        initial #1;
      endmodule
    expect:
      stdout: "result=42\n"

  - name: child_writes_parent_var
    description: Child module writes to parent variable
    sv: |
      module Child;
        initial begin
          Test.parent_val = 99;
        end
      endmodule

      module Test;
        int parent_val = 0;
        Child c();
        initial begin
          #1;
          $display("parent_val=%0d", parent_val);
        end
      endmodule
    expect:
      stdout: "parent_val=99\n"

  - name: child_accesses_sibling
    description: Child module accesses sibling instance via parent path
    sv: |
      module Child;
        int value;
        int result;
      endmodule

      module Test;
        int captured;
        Child a();
        Child b();
        initial begin
          a.value = 10;
          // b reads from a via upward then downward path
          captured = Test.a.value;
          $display("captured=%0d", captured);
        end
      endmodule
    expect:
      stdout: "captured=10\n"

  - name: nested_upward_ref
    description: Deeply nested module accesses top-level variable
    sv: |
      module Inner;
        int result;
        initial begin
          result = Test.top_val;
          $display("result=%0d", result);
        end
      endmodule

      module Middle;
        Inner i();
      endmodule

      module Test;
        int top_val = 123;
        Middle m();
        initial #1;
      endmodule
    expect:
      stdout: "result=123\n"
