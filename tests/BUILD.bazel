load("@rules_cc//cc:defs.bzl", "cc_library", "cc_test")
load("//tests:sv_feature_test.bzl", "sv_feature_test")

cc_library(
    name = "test_utils",
    srcs = ["utils/cpp_test_runner.cpp"],
    hdrs = ["utils/cpp_test_runner.hpp"],
    deps = [
        "//:core",
        "//tests:test_framework",
    ],
)

cc_library(
    name = "test_framework",
    srcs = ["framework/yaml_loader.cpp"],
    hdrs = [
        "framework/test_case.hpp",
        "framework/yaml_loader.hpp",
    ],
    deps = [
        "@yaml-cpp",
    ],
)

sv_feature_test(
    name = "operators_binary_tests",
    size = "large",
    yaml = "sv_features/operators/binary.yaml",
)

sv_feature_test(
    name = "operators_unary_tests",
    yaml = "sv_features/operators/unary.yaml",
)

sv_feature_test(
    name = "processes_initial_tests",
    yaml = "sv_features/processes/initial.yaml",
)

sv_feature_test(
    name = "processes_timing_tests",
    yaml = "sv_features/processes/timing.yaml",
)

sv_feature_test(
    name = "processes_non_blocking_tests",
    size = "large",
    yaml = "sv_features/processes/non_blocking.yaml",
)

sv_feature_test(
    name = "processes_wait_event_tests",
    yaml = "sv_features/processes/wait_event.yaml",
)

sv_feature_test(
    name = "control_flow_conditionals_tests",
    yaml = "sv_features/control_flow/conditionals.yaml",
)

sv_feature_test(
    name = "control_flow_loops_tests",
    size = "large",
    yaml = "sv_features/control_flow/loops.yaml",
)

sv_feature_test(
    name = "datatypes_variables_tests",
    yaml = "sv_features/datatypes/variables.yaml",
)

cc_test(
    name = "wait_event_tests",
    size = "small",
    srcs = ["e2e/wait_event_tests.cpp"],
    deps = [
        "//:core",
        "@googletest//:gtest",
    ],
)
