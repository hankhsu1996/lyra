feature: shortreal_type_support
description: Tests for shortreal (32-bit float) type support

cases:
  # Variable declaration tests
  - name: shortreal_declaration_default
    sv: |
      module Test;
        shortreal x;
        initial $display("%f", x);
      endmodule
    expect:
      output: "0.000000\n"

  - name: shortreal_declaration_with_init
    sv: |
      module Test;
        shortreal x = 3.14;
        initial $display("%f", x);
      endmodule
    expect:
      output: "3.140000\n"

  - name: shortreal_local_variable
    sv: |
      module Test;
        initial begin
          shortreal x = 2.5;
          $display("%f", x);
        end
      endmodule
    expect:
      output: "2.500000\n"

  - name: shortreal_assignment
    sv: |
      module Test;
        shortreal x;
        initial begin
          x = 1.25;
          $display("%f", x);
        end
      endmodule
    expect:
      output: "1.250000\n"

  # Arithmetic operation tests
  - name: shortreal_add
    sv: |
      module Test;
        shortreal a = 1.5;
        shortreal b = 2.5;
        shortreal c;
        initial begin
          c = a + b;
          $display("%f", c);
        end
      endmodule
    expect:
      output: "4.000000\n"

  - name: shortreal_subtract
    sv: |
      module Test;
        shortreal a = 5.5;
        shortreal b = 2.0;
        shortreal c;
        initial begin
          c = a - b;
          $display("%f", c);
        end
      endmodule
    expect:
      output: "3.500000\n"

  - name: shortreal_multiply
    sv: |
      module Test;
        shortreal a = 2.5;
        shortreal b = 4.0;
        shortreal c;
        initial begin
          c = a * b;
          $display("%f", c);
        end
      endmodule
    expect:
      output: "10.000000\n"

  - name: shortreal_divide
    sv: |
      module Test;
        shortreal a = 7.5;
        shortreal b = 2.5;
        shortreal c;
        initial begin
          c = a / b;
          $display("%f", c);
        end
      endmodule
    expect:
      output: "3.000000\n"

  - name: shortreal_power
    sv: |
      module Test;
        shortreal a = 2.0;
        shortreal b = 3.0;
        shortreal c;
        initial begin
          c = a ** b;
          $display("%f", c);
        end
      endmodule
    expect:
      output: "8.000000\n"

  - name: shortreal_unary_minus
    sv: |
      module Test;
        shortreal a = 3.5;
        shortreal b;
        initial begin
          b = -a;
          $display("%f", b);
        end
      endmodule
    expect:
      output: "-3.500000\n"

  - name: shortreal_unary_plus
    sv: |
      module Test;
        shortreal a = 3.5;
        shortreal b;
        initial begin
          b = +a;
          $display("%f", b);
        end
      endmodule
    expect:
      output: "3.500000\n"

  # Comparison operation tests
  - name: shortreal_less_than_true
    sv: |
      module Test;
        shortreal a = 1.5;
        shortreal b = 2.5;
        initial $display("%d", a < b);
      endmodule
    expect:
      output: "1\n"

  - name: shortreal_less_than_false
    sv: |
      module Test;
        shortreal a = 3.5;
        shortreal b = 2.5;
        initial $display("%d", a < b);
      endmodule
    expect:
      output: "0\n"

  - name: shortreal_greater_than_true
    sv: |
      module Test;
        shortreal a = 3.5;
        shortreal b = 2.5;
        initial $display("%d", a > b);
      endmodule
    expect:
      output: "1\n"

  - name: shortreal_greater_than_false
    sv: |
      module Test;
        shortreal a = 1.5;
        shortreal b = 2.5;
        initial $display("%d", a > b);
      endmodule
    expect:
      output: "0\n"

  - name: shortreal_equal_true
    sv: |
      module Test;
        shortreal a = 2.5;
        shortreal b = 2.5;
        initial $display("%d", a == b);
      endmodule
    expect:
      output: "1\n"

  - name: shortreal_not_equal_true
    sv: |
      module Test;
        shortreal a = 2.5;
        shortreal b = 3.5;
        initial $display("%d", a != b);
      endmodule
    expect:
      output: "1\n"

  # Logical operation tests
  - name: shortreal_logical_and_true
    sv: |
      module Test;
        shortreal a = 1.5;
        shortreal b = 2.5;
        initial $display("%d", a && b);
      endmodule
    expect:
      output: "1\n"

  - name: shortreal_logical_and_false
    sv: |
      module Test;
        shortreal a = 1.5;
        shortreal b = 0.0;
        initial $display("%d", a && b);
      endmodule
    expect:
      output: "0\n"

  - name: shortreal_logical_or_true
    sv: |
      module Test;
        shortreal a = 0.0;
        shortreal b = 2.5;
        initial $display("%d", a || b);
      endmodule
    expect:
      output: "1\n"

  - name: shortreal_logical_not_true
    sv: |
      module Test;
        shortreal a = 0.0;
        initial $display("%d", !a);
      endmodule
    expect:
      output: "1\n"

  - name: shortreal_logical_not_false
    sv: |
      module Test;
        shortreal a = 2.5;
        initial $display("%d", !a);
      endmodule
    expect:
      output: "0\n"

  # Type conversion tests
  - name: int_to_shortreal_conversion
    sv: |
      module Test;
        int i = 42;
        shortreal r;
        initial begin
          r = i;
          $display("%f", r);
        end
      endmodule
    expect:
      output: "42.000000\n"

  - name: shortreal_to_int_conversion
    sv: |
      module Test;
        shortreal r = 3.7;
        int i;
        initial begin
          i = r;
          $display("%d", i);
        end
      endmodule
    expect:
      output: "3\n"

  - name: shortreal_to_int_negative
    sv: |
      module Test;
        shortreal r = -3.7;
        int i;
        initial begin
          i = r;
          $display("%d", i);
        end
      endmodule
    expect:
      output: "-3\n"

  # Mixed shortreal/real operations (should promote to real)
  - name: shortreal_real_add
    sv: |
      module Test;
        shortreal a = 1.5;
        real b = 2.5;
        real c;
        initial begin
          c = a + b;
          $display("%f", c);
        end
      endmodule
    expect:
      output: "4.000000\n"

  - name: real_shortreal_multiply
    sv: |
      module Test;
        real a = 2.5;
        shortreal b = 4.0;
        real c;
        initial begin
          c = a * b;
          $display("%f", c);
        end
      endmodule
    expect:
      output: "10.000000\n"

  - name: shortreal_real_comparison
    sv: |
      module Test;
        shortreal a = 1.5;
        real b = 2.5;
        initial $display("%d", a < b);
      endmodule
    expect:
      output: "1\n"

  # Shortreal as condition
  - name: shortreal_as_condition
    sv: |
      module Test;
        shortreal x = 1.5;
        initial begin
          if (x)
            $display("nonzero");
          else
            $display("zero");
        end
      endmodule
    expect:
      output: "nonzero\n"

  - name: shortreal_zero_as_condition
    sv: |
      module Test;
        shortreal x = 0.0;
        initial begin
          if (x)
            $display("nonzero");
          else
            $display("zero");
        end
      endmodule
    expect:
      output: "zero\n"

  # Real to shortreal conversion (precision loss)
  - name: real_to_shortreal_conversion
    sv: |
      module Test;
        real r = 3.14159265358979;
        shortreal s;
        initial begin
          s = r;
          $display("%f", s);
        end
      endmodule
    expect:
      output: "3.141593\n"

  # Shortreal to real conversion (precision gain)
  - name: shortreal_to_real_conversion
    sv: |
      module Test;
        shortreal s = 3.14;
        real r;
        initial begin
          r = s;
          $display("%f", r);
        end
      endmodule
    expect:
      output: "3.140000\n"
