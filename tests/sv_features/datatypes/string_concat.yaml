feature: string_concat
description: String concatenation and replication (IEEE 1800-2023 6.16, 11.4.12.2)

cases:
  - name: string_concat_with_variable
    description: Concatenation with string variable forces string mode
    sv: |
      module Test;
        initial begin
          automatic string hello = "hello";
          automatic string s;
          s = {hello, " ", "world"};
          $display("%s", s);
        end
      endmodule
    expect:
      stdout: "hello world\n"

  - name: string_concat_all_literals
    description: Concatenation of all string literals (bit concat wrapped in conversion)
    sv: |
      module Test;
        initial begin
          automatic string s;
          s = {"foo", "bar"};
          $display("%s", s);
        end
      endmodule
    expect:
      stdout: "foobar\n"

  - name: string_concat_multiple
    description: Concatenation of multiple string operands
    sv: |
      module Test;
        initial begin
          automatic string a = "one";
          automatic string b = "two";
          automatic string c = "three";
          automatic string s;
          s = {a, "-", b, "-", c};
          $display("%s", s);
        end
      endmodule
    expect:
      stdout: "one-two-three\n"

  - name: string_replication_constant
    description: String replication with constant count
    sv: |
      module Test;
        initial begin
          automatic string s;
          s = {3{"boo "}};
          $display("%s", s);
        end
      endmodule
    expect:
      stdout: "boo boo boo \n"

  - name: string_replication_single
    description: String replication with count of 1
    sv: |
      module Test;
        initial begin
          automatic string s;
          s = {1{"hello"}};
          $display("%s", s);
        end
      endmodule
    expect:
      stdout: "hello\n"

  - name: string_concat_empty
    description: Concatenation with empty string
    sv: |
      module Test;
        initial begin
          automatic string empty = "";
          automatic string s;
          s = {"prefix", empty, "suffix"};
          $display("%s", s);
        end
      endmodule
    expect:
      stdout: "prefixsuffix\n"
