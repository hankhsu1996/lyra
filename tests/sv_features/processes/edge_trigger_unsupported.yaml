feature: edge trigger rejection on unsupported sub-expressions
description: >
  Edge triggers on division in index expressions, dynamic array/queue elements,
  dynamic unpacked array indices, and wide index variables are rejected at compile time.

cases:
  - name: dynamic_unpacked_array_edge
    description: "@(posedge arr[i]) with dynamic index on unpacked array should be rejected"
    sv: |
      module Test;
        logic arr [0:3];
        int i = 0;
        initial begin
          @(posedge arr[i]);
          $finish;
        end
      endmodule
    expect:
      error:
        contains:
          - "dynamic unpacked array index edge triggers are not supported"

  - name: dynamic_array_element_edge
    description: "@(posedge d[0]) on dynamic array element should be rejected"
    sv: |
      module Test;
        logic d[];
        initial begin
          @(posedge d[0]);
          $finish;
        end
      endmodule
    expect:
      error:
        contains:
          - "edge triggers on dynamic array/queue elements are not supported"

  - name: wide_index_rejected
    description: "@(posedge bus[i]) with 128-bit index should be rejected"
    sv: |
      module Test;
        logic [255:0] bus;
        logic [127:0] i = 0;
        initial begin
          @(posedge bus[i]);
          $finish;
        end
      endmodule
    expect:
      error:
        contains:
          - "dynamic index edge triggers require index width <= 64 bits"

  - name: divide_in_index_rejected
    description: "@(posedge bus[i/2]) with division in index should be rejected"
    sv: |
      module Test;
        logic [7:0] bus;
        int i = 4;
        initial begin
          @(posedge bus[i/2]);
          $finish;
        end
      endmodule
    expect:
      error:
        contains:
          - "unsupported operator in dynamic index edge trigger expression"
