# Test suite definitions
#
# Suites define backend + test selection (closed contracts for CI).
# Patterns are regex substrings matched against relative paths.
# Empty include_regex = all YAML files. Exclude wins over include.

suites:
  jit_dev:
    backend: jit
    include_regex:
      - control_flow/
      - datatypes/
      - directives/
      - functions/
      - generate/
      - hierarchy/
      - lifecycle/
      - metadata/
      - operators/
      - packages/
      - processes/
      - scheduling/
      - system_tf/
      - trace/
    exclude_regex:
      - system_tf/pure/array_query\.yaml # MIR-only (LLVM backend unsupported)
      - system_tf/effect/system_cmd\.yaml # MIR-only ($system not in LLVM)
      - datatypes/unpacked/assoc_arrays\.yaml # MIR-only (AA not in LLVM)

  lli_dev:
    backend: lli
    include_regex:
      - control_flow/
      - datatypes/
      - directives/
      - functions/
      - generate/
      - hierarchy/
      - lifecycle/
      - metadata/
      - operators/
      - packages/
      - processes/
      - scheduling/
      - system_tf/
      - trace/
    exclude_regex:
      - system_tf/pure/array_query\.yaml # MIR-only (LLVM backend unsupported)
      - system_tf/effect/system_cmd\.yaml # MIR-only ($system not in LLVM)
      - datatypes/unpacked/assoc_arrays\.yaml # MIR-only (AA not in LLVM)

  mir_dev:
    backend: mir
    include_regex:
      - control_flow/
      - datatypes/
      - functions/
      - generate/
      - hierarchy/refs/
      - lifecycle/
      - operators/
      - packages/
      - system_tf/effect/
      - system_tf/pure/
      - system_tf/state/random\.yaml
      - trace/
    exclude_regex:
      - trace/bulk_ops\.yaml # JIT-only (requires flush-based trace via UpdateSet)
      - trace/update_set\.yaml # JIT-only (requires UpdateSet)
